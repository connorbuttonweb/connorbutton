<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HYROX — Connor Button</title>
  <link rel="stylesheet" href="main.css" />

  <style>
    /* Page-specific touches that keep your global aesthetic */
    .page-title { margin: 0; }
    .page-subtitle { margin: 6px 0 18px; color: var(--muted); }
    .title-row{
      display:flex; align-items:center; gap:12px; flex-wrap:wrap;
    }
    .title-row a.logo-link img{
      height:56px; width:auto; border-radius:10px; box-shadow: var(--shadow);
    }

    /* Narrative sections that mix copy + media */
    .hyrox-block{
      display:grid; gap:16px; margin:28px 0 34px;
      grid-template-columns: 1.2fr 1fr;
      align-items:start;
    }
    .hyrox-block.reverse{ grid-template-columns: 1fr 1.2fr; }
    .hyrox-block .copy p{ margin:0 0 10px; color:#222; }
    .hyrox-block .copy .small{ color: var(--muted); }
    .hyrox-block .media{ align-self: stretch; }
    .hyrox-block .media .gallery{ margin:0; }
    .hyrox-block .media .gallery > *{ grid-column: span 12; } /* 1-up focus frames */

    /* Stack on mobile */
    @media (max-width: 900px){
      .hyrox-block, .hyrox-block.reverse{ grid-template-columns: 1fr; }
    }

    /* Click affordance like portfolio */
    .gallery figure{ position:relative; cursor:zoom-in; border-radius:var(--radius); overflow:hidden; }
    .media-badge{
      position:absolute; right:10px; bottom:10px; font-size:12px; padding:4px 8px;
      border-radius:999px; background:rgba(0,0,0,.6); color:#fff; backdrop-filter:blur(3px);
      user-select:none; pointer-events:none;
    }

    /* Lightbox overlay (copied from portfolio) */
    .lightbox { position:fixed; inset:0; display:none; align-items:center; justify-content:center;
      background:rgba(0,0,0,.9); z-index:9999; }
    .lightbox.open{ display:flex; }
    .lightbox-content{ position:relative; max-width:95vw; max-height:92vh; width:min(1100px,95vw);
      display:flex; align-items:center; justify-content:center; }
    .lightbox img, .lightbox video{ max-width:100%; max-height:92vh; width:auto; height:auto;
      border-radius:12px; outline:1px solid rgba(255,255,255,.15); background:#000; }
    .lightbox .close, .lightbox .prev, .lightbox .next{
      position:absolute; top:50%; transform:translateY(-50%); border:0;
      background:rgba(255,255,255,.12); color:#fff; padding:.65rem .8rem; border-radius:10px;
      cursor:pointer; font-weight:700;
    }
    .lightbox .close{ top:2%; right:2%; transform:none; }
    .lightbox .prev{ left:1.2%; } .lightbox .next{ right:1.2%; }
    .lightbox .close:hover, .lightbox .prev:hover, .lightbox .next:hover{ background:rgba(255,255,255,.22); }
    .caption{ margin-top:.75rem; text-align:center; color:#f0f0f0; font-size:.95rem; opacity:.85; max-width:min(900px,90vw); }
  </style>
</head>

<body>
  <div class="back-btn">
    <a href="index.html">← Back to Home</a>
  </div>

  <section class="section">
    <div class="container">

      <!-- Title + “logo” link to HYROX -->
      <div class="title-row">
        <a class="logo-link" href="https://hyrox.com" target="_blank" rel="noopener" aria-label="Visit HYROX website">
          <!-- Using your HYROX signage photo as a placeholder 'logo' -->
          <img src="images/hyrox/sign.jpg" alt="HYROX" />
        </a>
        <h1 class="page-title">HYROX Race — Toronto</h1>
      </div>
      <p class="page-subtitle">World Series of Fitness Racing • Exhibition Place, Toronto • Solo division</p>

      <!-- Intro narrative -->
      <div class="card lede" style="margin-bottom:24px;">
        <p>HYROX combines functional fitness with endurance running: eight 1&nbsp;km runs, each followed by a workout station. It’s a test of pacing, grit, and smart transitions—more like a time-trial than a heat. Below is a recap of my Toronto race day with a few highlights and the final time.</p>
      </div>

      <!-- Block 1: Venue (CNE arch) -->
      <section class="hyrox-block">
        <div class="copy">
          <h2>Venue: Exhibition Place</h2>
          <p>The event took over the Enercare Centre at Exhibition Place—wide lanes, clean routing, and tons of spectator energy. Starting under the historic CNE arch felt like a proper “race day” moment before heading inside to the grid.</p>
        </div>
        <div class="media">
          <div class="gallery" data-gallery="hyrox">
            <figure data-type="image" data-caption="CNE Princes’ Gates before heading in." data-src="images/hyrox/cne.jpg">
              <img src="images/hyrox/cne.jpg" alt="CNE Princes’ Gates" loading="lazy" decoding="async" />
            </figure>
          </div>
        </div>
      </section>

      <!-- Block 2: Opening km + SkiErg -->
      <section class="hyrox-block reverse">
        <div class="copy">
          <h2>Run 1 → SkiErg</h2>
          <p>Settled the cadence early and moved into the first station calm. The SkiErg is all about rhythm: powerful pulls, quick recoveries, and keeping the heart rate capped for the long day ahead.</p>
          <p class="small">Tip I used: count in 10-pull chunks to hold pace without overcooking the first third of the race.</p>
        </div>
        <div class="media">
          <div class="gallery" data-gallery="hyrox">
            <figure data-type="image" data-caption="SkiErg — staying smooth and efficient." data-src="images/hyrox/erg.jpg">
              <img src="images/hyrox/erg.jpg" alt="SkiErg station action shot" loading="lazy" decoding="async" />
            </figure>
          </div>
        </div>
      </section>

      <!-- Block 3: Farmers Carry -->
      <section class="hyrox-block">
        <div class="copy">
          <h2>Run 4 → Farmer’s Carry</h2>
          <p>Grip management was the name of the game: short steps, tall posture, and controlled turns to avoid dumping speed. This felt like a “free” station if you don’t rush the handles.</p>
        </div>
        <div class="media">
          <div class="gallery" data-gallery="hyrox">
            <figure data-type="image" data-caption="Farmer’s Carry under the archway marker." data-src="images/hyrox/farmer.jpg">
              <img src="images/hyrox/farmer.jpg" alt="Carrying kettlebells during Farmer’s Carry" loading="lazy" decoding="async" />
            </figure>
          </div>
        </div>
      </section>

      <!-- Block 4: Sled Push -->
      <section class="hyrox-block reverse">
        <div class="copy">
          <h2>Run 5 → Sled Push</h2>
          <p>The sled is the leg-drain. I broke it into measured lengths with quick resets, keeping the chest high and feet choppy to maintain traction.</p>
        </div>
        <div class="media">
          <div class="gallery" data-gallery="hyrox">
            <figure data-type="image" data-caption="Sled Push — controlled cadence, consistent drive." data-src="images/hyrox/sled.jpg">
              <img src="images/hyrox/sled.jpg" alt="Pushing weighted sled" loading="lazy" decoding="async" />
            </figure>
          </div>
        </div>
      </section>

      <!-- Block 5: Sandbag Lunges -->
      <section class="hyrox-block">
        <div class="copy">
          <h2>Run 7 → Sandbag Lunges</h2>
          <p>Focus: knee to floor, hips tall, breathe at the top. This is where form beats force—smooth reps kept the legs alive for the final kilometer and wall balls.</p>
        </div>
        <div class="media">
          <div class="gallery" data-gallery="hyrox">
            <figure data-type="image" data-caption="Sandbag lunges lap — steady through the burn." data-src="images/hyrox/lunge.jpg">
              <img src="images/hyrox/lunge.jpg" alt="Sandbag lunge station" loading="lazy" decoding="async" />
            </figure>
          </div>
        </div>
      </section>

      <!-- Block 6: On-course running -->
      <section class="hyrox-block reverse">
        <div class="copy">
          <h2>On the Laps</h2>
          <p>Each 1&nbsp;km loop rewarded calm pacing and tight turns. I kept the stride compact to stay efficient between stations and protect the legs for the sled and lunges.</p>
        </div>
        <div class="media">
          <div class="gallery" data-gallery="hyrox">
            <figure data-type="image" data-caption="Course laps through the grid and brand towers." data-src="images/hyrox/run.jpg">
              <img src="images/hyrox/run.jpg" alt="Running through the HYROX course" loading="lazy" decoding="async" />
            </figure>
            <figure data-type="image" data-caption="HYROX grid signage — World Series of Fitness Racing." data-src="images/hyrox/sign.jpg">
              <img src="images/hyrox/sign.jpg" alt="HYROX signage in the arena" loading="lazy" decoding="async" />
            </figure>
          </div>
        </div>
      </section>

      <!-- Finish -->
      <section class="card" style="text-align:center;">
        <h2>Finish & Result</h2>
        <p>Crossed the line in <strong>1:35:14</strong> — proud of the pacing and how each station set up the next. Already planning the next one.</p>
        <div class="gallery" data-gallery="hyrox" style="margin-top:12px;">
          <figure data-type="image" data-caption="Post-race: 1:35:14 at HYROX Toronto." data-src="images/hyrox/time.jpg">
            <img src="images/hyrox/time.jpg" alt="Finish time display and medal photo" loading="lazy" decoding="async" />
          </figure>
        </div>
      </section>
    </div>
  </section>

  <!-- Lightbox root -->
  <div class="lightbox" id="lightbox" aria-modal="true" role="dialog" aria-label="Media viewer">
    <div class="lightbox-content" id="lbContent" tabindex="0" aria-live="polite"></div>
    <button class="close" id="lbClose" aria-label="Close (Esc)">✕</button>
    <button class="prev" id="lbPrev" aria-label="Previous (←)">⬅</button>
    <button class="next" id="lbNext" aria-label="Next (→)">➡</button>
    <p class="caption" id="lbCaption"></p>
  </div>

  <!-- Performance + Lightbox JS (mirrors your portfolio page) -->
  <script>
  // Defer heavy loads
  (function () {
    const imgs = Array.from(document.querySelectorAll('img'));
    imgs.forEach((img, i) => {
      if (i < 2) { img.loading = 'eager'; img.fetchPriority = 'high'; }
      else { img.loading = 'lazy'; img.decoding = 'async'; img.fetchPriority = 'low'; }
    });
    const vids = document.querySelectorAll('video');
    vids.forEach(v => { v.preload = 'none'; });
    const iv = new IntersectionObserver((entries) => {
      entries.forEach(({isIntersecting, target:v}) => { if (!isIntersecting && !v.paused) v.pause(); });
    }, { threshold: 0.1 });
    vids.forEach(v => iv.observe(v));
  })();

  // Lightbox (same core as portfolio)
  (function(){
    const galleries = Array.from(document.querySelectorAll('.gallery'));
    const lightbox = document.getElementById('lightbox');
    const lbContent = document.getElementById('lbContent');
    const lbCaption = document.getElementById('lbCaption');
    const btnPrev = document.getElementById('lbPrev');
    const btnNext = document.getElementById('lbNext');
    const btnClose = document.getElementById('lbClose');

    const media = [];
    galleries.forEach(g => {
      const tiles = Array.from(g.querySelectorAll('figure'));
      tiles.forEach(t => media.push({
        el: t,
        gallery: g.dataset.gallery || 'gallery',
        type: t.dataset.type || (t.querySelector('video') ? 'video' : 'image'),
        src: (t.dataset.src
                ? t.dataset.src.split(',').map(s => s.trim()).filter(Boolean)
                : [t.querySelector('img,video')?.getAttribute('src')].filter(Boolean)),
        poster: t.dataset.poster || t.querySelector('video')?.getAttribute('poster') || '',
        caption: t.dataset.caption || t.querySelector('img')?.getAttribute('alt') || ''
      }));
    });

    let currentIndex = -1;

    function stopActiveVideo(){
      const v = lbContent.querySelector('video');
      if (v){
        try { v.pause(); } catch(_) {}
        v.removeAttribute('src');
        v.querySelectorAll('source').forEach(s => s.remove());
        v.load();
      }
    }
    function renderMedia(item){
      stopActiveVideo();
      lbContent.innerHTML = '';
      if (item.type === 'video'){
        const v = document.createElement('video');
        v.controls = true; v.playsInline = true; v.preload = 'metadata';
        if (item.poster) v.poster = item.poster;
        (Array.isArray(item.src) ? item.src : [item.src]).forEach(src => {
          const s = document.createElement('source');
          s.src = src; s.type = src.endsWith('.webm') ? 'video/webm' : 'video/mp4';
          v.appendChild(s);
        });
        lbContent.appendChild(v); v.muted = true; v.play().catch(()=>{});
      } else {
        const img = document.createElement('img');
        img.src = Array.isArray(item.src) ? item.src[0] : item.src;
        img.alt = item.caption || 'Expanded image';
        lbContent.appendChild(img);
      }
      lbCaption.textContent = item.caption || '';
    }
    function openAt(i){ if(i<0||i>=media.length) return; renderMedia(media[i]); currentIndex=i; lightbox.classList.add('open'); document.body.style.overflow='hidden'; lbContent.focus(); }
    function close(){ lightbox.classList.remove('open'); document.body.style.overflow=''; stopActiveVideo(); lbContent.innerHTML=''; lbCaption.textContent=''; }
    function prev(){ stopActiveVideo(); openAt((currentIndex - 1 + media.length) % media.length); }
    function next(){ stopActiveVideo(); openAt((currentIndex + 1) % media.length); }

    media.forEach((m, idx) => {
      m.el.addEventListener('click', () => openAt(idx));
      m.el.setAttribute('tabindex', '0');
      m.el.setAttribute('role', 'button');
      m.el.addEventListener('keydown', (e) => {
        if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); openAt(idx); }
      });
    });
    btnClose.addEventListener('click', close);
    btnPrev.addEventListener('click', prev);
    btnNext.addEventListener('click', next);
    lightbox.addEventListener('click', (e) => { if(e.target === lightbox) close(); });
    document.addEventListener('keydown', (e) => {
      if(!lightbox.classList.contains('open')) return;
      if(e.key === 'Escape') close();
      else if(e.key === 'ArrowLeft') prev();
      else if(e.key === 'ArrowRight') next();
    });

    // Swipe (mobile)
    let touchStartX = null;
    lightbox.addEventListener('touchstart', e => { touchStartX = e.changedTouches[0].clientX; }, { passive:true });
    lightbox.addEventListener('touchend', e => {
      if (touchStartX === null) return;
      const dx = e.changedTouches[0].clientX - touchStartX;
      if (Math.abs(dx) > 50) { dx > 0 ? prev() : next(); }
      touchStartX = null;
    }, { passive:true });
  })();
  </script>
</body>
</html>